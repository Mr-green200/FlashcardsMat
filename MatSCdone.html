<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materials Science Flashcards (All Questions)</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        #flashcard-container {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 30px;
            width: 90%;
            max-width: 700px; /* Slightly wider for longer questions */
            text-align: center;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        #card-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
             flex-wrap: wrap;
        }
         #filter-controls {
             text-align: right;
             flex-grow: 1;
             margin-left: 10px;
         }
         #filter-controls label {
              font-size: 0.9em;
              color: #555;
              cursor: pointer;
          }
         #card-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        #question-number {
            font-size: 0.9em;
            color: #888;
        }
        #question {
            font-size: 1.1em; /* Slightly smaller for potentially longer text */
            margin-bottom: 20px;
            min-height: 60px; /* Ensure space */
             white-space: pre-wrap;
             text-align: left;
             line-height: 1.4;
        }
        /* Style for open questions */
        .open-question-text {
            color: #6f42c1; /* Purple color */
            font-weight: bold;
        }
        #answer, #hint, #no-hard-message {
            background-color: #e9f5ff;
            border: 1px solid #b3d7ff;
            border-radius: 4px;
            padding: 15px;
            margin-top: 15px;
            font-size: 1.05em; /* Slightly smaller */
             text-align: left;
             white-space: pre-wrap; /* Allow line breaks in answers */
        }
         #no-hard-message {
             background-color: #fff3cd;
             border-color: #ffeeba;
             color: #856404;
         }
        .hidden {
            display: none;
        }
        #controls {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        button {
            padding: 10px 15px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        button:hover {
            opacity: 0.9;
        }
        #prevBtn, #nextBtn {
            background-color: #007bff;
            color: white;
        }
        #revealBtn {
            background-color: #28a745;
            color: white;
        }
        #hintBtn {
            background-color: #ffc107;
            color: #333;
        }
         #markHardBtn {
            background-color: #dc3545;
            color: white;
        }
         #markHardBtn.marked {
             background-color: #c82333;
             font-weight: bold;
         }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
         .hard-status {
             font-weight: bold;
             color: #dc3545;
             margin-left: 10px;
             font-size: 0.9em;
         }
    </style>
</head>
<body>

<div id="flashcard-container">
    <div id="card-status">
         <div>
             <span id="question-number"></span>
             <span id="hard-status" class="hard-status hidden">Marked as Hard</span>
         </div>
        <div id="filter-controls">
            <input type="checkbox" id="showHardOnlyCheckbox" name="showHardOnlyCheckbox">
            <label for="showHardOnlyCheckbox">Show Only Hard</label>
        </div>
    </div>

    <div id="card-content">
        <div id="question">Loading...</div>
        <div id="hint" class="hidden"></div>
        <div id="answer" class="hidden"></div>
        <div id="no-hard-message" class="hidden">No questions marked as hard.</div>
    </div>

    <div id="controls">
        <button id="prevBtn">Previous</button>
        <button id="nextBtn">Next / Skip</button>
        <button id="revealBtn">Reveal Answer</button>
        <button id="hintBtn">Hint</button>
        <button id="markHardBtn">Mark as Hard</button>
    </div>
</div>

<script>
    // Combine all questions into one array
    const allQuestions = [
        // --- List 1 Questions (Original Q1-72) ---
        {
            id: 1, originalRef: "L1:Q1",
            question: "[Image shows five composite types: [A] Random short fibers, [B] Fine dispersed particles, [C] Stacked layers, [D] Aligned short fibers, [E] Large irregular particles]. What type of composite is shown here? (Question likely refers to one specific image or asks for types represented).",
            answer: "Possible Types: Fiber-reinforced (Discontinuous Random/Aligned), Particle-reinforced (Fine/Large), Laminar/Layered.",
            hint: "Consider the main categories based on reinforcement shape and arrangement: fibers, particles, or layers.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 2, originalRef: "L1:Q2",
            question: "If dislocation movement is easy, the metal will be ......",
            answer: "Ductile, Soft, Low strength.",
            hint: "Easy dislocation movement means plastic deformation occurs easily under stress.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 3, originalRef: "L1:Q3",
            question: "If dislocation movement is hard, the metal will be ......",
            answer: "Brittle, Hard, Strong, High strength.",
            hint: "Difficult dislocation movement means the material resists plastic deformation.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 4, originalRef: "L1:Q4",
            question: "In strain hardening, the material is not plastically deformed. True or False?",
            answer: "False.",
            hint: "Strain hardening (work hardening) fundamentally involves plastic deformation.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 5, originalRef: "L1:Q5",
            question: "In strain hardening, the material is plastically deformed. True or False?",
            answer: "True.",
            hint: "Strain hardening increases strength *because* of plastic deformation.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 6, originalRef: "L1:Q6",
            question: "The ability of a material to absorb force and flex in different directions returning to its original form after a load has been applied and removed is called ...",
            answer: "Elasticity.",
            hint: "Focus on the 'returning to its original form' part.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 7, originalRef: "L1:Q7",
            question: "The ability of a material to withstand an applied force without failure or plastic deformation is called ...",
            answer: "Strength (Yield Strength for plastic deformation limit).",
            hint: "This describes resistance to breaking or permanently bending.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 8, originalRef: "L1:Q8",
            question: "The ability of a material to undergo plastic deformation before rupture is termed ...",
            answer: "Ductility.",
            hint: "How much can it be stretched or drawn out before breaking?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 9, originalRef: "L1:Q9",
            question: "Elastic deformation is a reversible change of shape in response to applied forces. True or False?",
            answer: "True.",
            hint: "By definition, elastic means it springs back.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 10, originalRef: "L1:Q10",
            question: "Plastic deformation is a reversible change of shape in response to applied forces. True or False?",
            answer: "False.",
            hint: "Plastic deformation is permanent.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 11, originalRef: "L1:Q11",
            question: "The elastic constant G describes the...",
            answer: "Shear Modulus (or Modulus of Rigidity); resistance to shear/twisting.",
            hint: "Think about twisting or cutting motion (shear).",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 12, originalRef: "L1:Q12",
            question: "The elastic constant E describes the...",
            answer: "Young's Modulus (or Modulus of Elasticity); stiffness; resistance to linear stretching/compression.",
            hint: "Think about pulling or pushing along an axis.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 13, originalRef: "L1:Q13",
            question: "The elastic constant K describes the...",
            answer: "Bulk Modulus; resistance to uniform compression (volume change).",
            hint: "Think about squeezing from all sides.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 14, originalRef: "L1:Q14",
            question: "The unit of the elastic modulus is...",
            answer: "Pascals (Pa, GPa) or psi (units of pressure/stress).",
            hint: "Modulus relates Stress (Force/Area) to Strain (dimensionless).",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 15, originalRef: "L1:Q15",
            question: "The maximum stress a material can withstand in a tensile test is termed...",
            answer: "Ultimate Tensile Strength (UTS).",
            hint: "This is the peak stress on the stress-strain curve.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 16, originalRef: "L1:Q16",
            question: "The stress a material can withstand without permanent deformation in a tensile test is termed...",
            answer: "Yield Strength (or Elastic Limit).",
            hint: "The point where deformation becomes permanent.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 17, originalRef: "L1:Q17",
            question: "Which of the following is a 0-dimensional crystal defect?",
            answer: "Point defect (e.g., Vacancy, Interstitial atom, Substitutional atom).",
            hint: "Think of defects localized at a single atomic site.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 18, originalRef: "L1:Q18",
            question: "Which of the following is a 1-dimensional crystal defect?",
            answer: "Line defect (e.g., Dislocation - edge, screw, mixed).",
            hint: "Think of defects extending along a line.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 19, originalRef: "L1:Q19",
            question: "Which of the following is a 2-dimensional crystal defect?",
            answer: "Planar/Interfacial defect (e.g., Grain boundary, Twin boundary, Stacking fault, Surface).",
            hint: "Think of defects existing across a plane or interface.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 20, originalRef: "L1:Q20",
            question: "Which of the following is a 3-dimensional crystal defect?",
            answer: "Volume/Bulk defect (e.g., Void, Pore, Crack, Precipitate, Inclusion).",
            hint: "Think of defects occupying a volume.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 21, originalRef: "L1:Q21",
            question: "The smallest portion of a crystal which when repeated in different directions generates the entire crystal is called",
            answer: "Unit cell.",
            hint: "The basic building block of a crystal lattice.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 22, originalRef: "L1:Q22",
            question: "Which crystal structure do materials chose to have?",
            answer: "The one with the lowest free energy (most stable) under given conditions.",
            hint: "Nature tends towards minimum energy states.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 23, originalRef: "L1:Q23",
            question: "How many crystal systems are known?",
            answer: "7.",
            hint: "Based on the symmetry constraints on lattice parameters.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 24, originalRef: "L1:Q24",
            question: "How are the crystal systems classified?",
            answer: "Based on unit cell geometry (edge lengths a, b, c and interaxial angles α, β, γ).",
            hint: "The shape and size parameters of the unit cell.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 25, originalRef: "L1:Q25",
            question: "What do Miller indizes describe?",
            answer: "Crystallographic planes and directions within a lattice.",
            hint: "A notation system for orientations in crystals.",
            isHard: false, isOpenQuestion: false
        },
         {
            id: 26, originalRef: "L1:Q26",
            question: "What is an unit cell?",
            answer: "The smallest repeating structural unit of a crystal lattice.",
            hint: "Repeats in 3D to form the whole crystal.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 27, originalRef: "L1:Q27",
            question: "Close-packed structures have: ...",
            answer: "High Atomic Packing Factor (APF), High coordination number, High density.",
            hint: "Atoms are packed as efficiently as possible.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 28, originalRef: "L1:Q28",
            question: "Which regular lattices achieve the highest average density of atomic packing?",
            answer: "Face-Centered Cubic (FCC) and Hexagonal Close-Packed (HCP).",
            hint: "These both achieve the theoretical maximum packing for spheres (APF=0.74).",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 29, originalRef: "L1:Q29",
            question: "How many Bravais lattices are known?",
            answer: "14.",
            hint: "Distinct lattice types based on symmetry and centering.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 30, originalRef: "L1:Q30",
            question: "What Bravais lattices does a cubic symmetry have?",
            answer: "Simple Cubic (SC/P), Body-Centered Cubic (BCC/I), Face-Centered Cubic (FCC/F).",
            hint: "Think P, I, F centering within the cubic system.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 31, originalRef: "L1:Q31",
            question: "Burgers vectors are relevant to which of the following crystalline defects?",
            answer: "Dislocations (Line defects).",
            hint: "It measures the distortion associated with this type of defect.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 32, originalRef: "L1:Q32",
            question: "What describes the Burgers vector?",
            answer: "The magnitude and direction of the lattice distortion associated with a dislocation.",
            hint: "It represents the 'slip' or displacement caused by the defect.",
            isHard: false, isOpenQuestion: false
        },
         {
            id: 33, originalRef: "L1:Q33",
            question: "Which of the following material's properties can be anisotropic?",
            answer: "Elastic modulus, Electrical conductivity, Thermal conductivity, Yield strength (depends on crystal structure/texture).",
            hint: "Anisotropic means 'direction-dependent'. Which properties might vary with direction in a single crystal?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 34, originalRef: "L1:Q34",
            question: "The compressbility of a material is described by the ...",
            answer: "Bulk Modulus (K) (inversely). Compressibility β = 1/K.",
            hint: "Compressibility is how much volume changes under pressure. Which modulus relates to volume change?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 35, originalRef: "L1:Q35",
            question: "The density of a metal is defined as ...",
            answer: "Mass per unit volume (ρ = m/V).",
            hint: "The fundamental definition of density.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 36, originalRef: "L1:Q36",
            question: "Which of the following material's properties are isotropic?",
            answer: "Typically density. Other properties (like E) in amorphous or random polycrystalline materials.",
            hint: "Isotropic means 'the same in all directions'. Amorphous materials lack directionality.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 37, originalRef: "L1:Q37",
            question: "Which of the following materials is the most malleable one?",
            answer: "Gold (Au) is famously malleable. Lead (Pb), Copper (Cu), Aluminum (Al) are also very malleable.",
            hint: "Malleability is the ability to be hammered into thin sheets without breaking. Think of soft metals.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 38, originalRef: "L1:Q38",
            question: "An Al tie has length of 2m on a hot, sunny, 35°C day. What is the length of the tie in the winter at -25°C? (Use α_Al ≈ 23 x 10⁻⁶ /°C)",
            answer: "Approx. 1.99724 m. Calculation: ΔL = L₀ * α * ΔT = 2m * (23e-6 /°C) * (-60°C) ≈ -0.00276 m. L_final = 2m - 0.00276m.",
            hint: "Use the thermal expansion formula: ΔL = L₀ * α * ΔT. Remember ΔT = T_final - T_initial.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 39, originalRef: "L1:Q39",
            question: "Wood is used as a building material. Under which of the following categories do they belong?",
            answer: "Natural material, Composite material (cellulose fibers in lignin matrix), Organic material, Polymer-based.",
            hint: "Consider its origin (natural) and structure (fibers in a matrix).",
            isHard: false, isOpenQuestion: false
        },
         {
            id: 40, originalRef: "L1:Q40",
            question: "What does the density of a material depend on?",
            answer: "Atomic weight of elements, Atomic packing (crystal structure/APF), Temperature.",
            hint: "Density = Mass/Volume. What affects the mass of atoms and how tightly they pack?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 41, originalRef: "L1:Q41",
            question: "The elastic modulus is a good indication of ...",
            answer: "Stiffness; resistance to elastic deformation.",
            hint: "A high modulus means it's hard to stretch elastically.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 42, originalRef: "L1:Q42",
            question: "Which of the following material classes has the best electrical conductors?",
            answer: "Metals.",
            hint: "Think about which materials allow electrons to move freely.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 43, originalRef: "L1:Q43",
            question: "The ability of a material to absorb energy and plastically deform without fracturing is termed ...",
            answer: "Toughness.",
            hint: "Combines strength and ductility; resistance to fracture when energy is applied.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 44, originalRef: "L1:Q44",
            question: "Rubber has a higher elastic modulus than steel. True or False?",
            answer: "False.",
            hint: "Which material is stiffer (harder to stretch)?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 45, originalRef: "L1:Q45",
            question: "Steel has a higher elastic modulus than plastic. True or False?",
            answer: "True.",
            hint: "Compare the stiffness of typical steel and plastic items.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 46, originalRef: "L1:Q46",
            question: "Electrical conductivity is the reciprocal of electrical resistivity. True or False?",
            answer: "True.",
            hint: "Conductivity measures how well current flows; resistivity measures how much it's resisted.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 47, originalRef: "L1:Q47",
            question: "A stressed material, which absorbs a great amount of energy on impact is ...",
            answer: "Tough.",
            hint: "Ability to withstand impact energy relates to toughness.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 48, originalRef: "L1:Q48",
            question: "A stressed material, which absorbs relatively little energy is ...",
            answer: "Brittle.",
            hint: "These materials fracture without absorbing much energy.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 49, originalRef: "L1:Q49",
            question: "[Image shows two fracture types: [Left] Cup-and-cone surfaces on two samples, [Right] Flat, granular surfaces on two samples]. What type of fracture is shown here? (Question likely refers to one type or asks for types represented).",
            answer: "Possible Types Shown: Ductile Fracture (left, cup-and-cone), Brittle Fracture (right, flat/granular).",
            hint: "Look for signs of plastic deformation (necking, shear lips for ductile) vs. flat, sudden breaks (brittle).",
            isHard: false, isOpenQuestion: false
        },
         {
            id: 50, originalRef: "L1:Q50",
            question: "How do electrons behave in a covalent bonding?",
            answer: "They are shared between adjacent atoms.",
            hint: "Co-valent = sharing valence electrons.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 51, originalRef: "L1:Q51",
            question: "Which interatomic bonding is described by the electron sea model?",
            answer: "Metallic bonding.",
            hint: "Positive ions immersed in a 'sea' of mobile electrons.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 52, originalRef: "L1:Q52",
            question: "Which of the interatomic bondings are directional?",
            answer: "Covalent bonding, Hydrogen bonding.",
            hint: "Directional bonds depend on specific orbital overlaps or alignments.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 53, originalRef: "L1:Q53",
            question: "Which of the following interatomic bonds is dominant in diamond?",
            answer: "Covalent bonding.",
            hint: "Diamond is a network of carbon atoms, each bonded strongly to four neighbors.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 54, originalRef: "L1:Q54",
            question: "Which of the interatomic bondings are non-directional?",
            answer: "Ionic bonding, Metallic bonding, Van der Waals forces.",
            hint: "These bonds depend on charge attraction or electron clouds acting uniformly around the atom/ion.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 55, originalRef: "L1:Q55",
            question: "Which of the following interatomic bonds is dominant in sodium chloride?",
            answer: "Ionic bonding.",
            hint: "NaCl is formed between a metal (Na+) and a non-metal (Cl-).",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 56, originalRef: "L1:Q56",
            question: "How do electrons behave in an ionic bonding?",
            answer: "They are transferred from one atom (forming cation) to another (forming anion).",
            hint: "Think about the formation of positive and negative ions.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 57, originalRef: "L1:Q57",
            question: "Which of the following is a primary bond?",
            answer: "Ionic bonding, Covalent bonding, Metallic bonding.",
            hint: "Primary bonds are the strong intramolecular forces.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 58, originalRef: "L1:Q58",
            question: "Which of the following is a secondary bond?",
            answer: "Van der Waals forces, Hydrogen bonding.",
            hint: "Secondary bonds are weaker intermolecular forces.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 59, originalRef: "L1:Q59",
            question: "What are grain boundaries?",
            answer: "Interfaces separating crystals (grains) of different crystallographic orientations (2D defect).",
            hint: "Boundaries between the small crystal regions in a polycrystalline material.",
            isHard: false, isOpenQuestion: false
        },
         {
            id: 60, originalRef: "L1:Q60",
            question: "What are dislocations?",
            answer: "Line defects (1D) involving lattice distortion; they enable plastic deformation.",
            hint: "Think of an extra half-plane or a slip plane offset.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 61, originalRef: "L1:Q61",
            question: "What are vacancies?",
            answer: "Point defects (0D) where an atom is missing from a lattice site.",
            hint: "An empty spot where an atom should be.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 62, originalRef: "L1:Q62",
            question: "What are precipitates?",
            answer: "Small particles of a second phase embedded within the matrix phase (3D defect).",
            hint: "Often formed during heat treatment to strengthen alloys.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 63, originalRef: "L1:Q63",
            question: "What kind of defect is formed by adding an extra plane of atoms into the crystal?",
            answer: "Edge dislocation.",
            hint: "Imagine inserting an extra half-plane of atoms.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 64, originalRef: "L1:Q64",
            question: "What kind of defect is formed by skewing a crystal by one atomic spacing?",
            answer: "Screw dislocation.",
            hint: "Imagine cutting partway and shearing the crystal, creating a helical ramp.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 65, originalRef: "L1:Q65",
            question: "What is a eutectic reaction?",
            answer: "On cooling, one Liquid phase transforms into two Solid phases (L → S1 + S2).",
            hint: "Liquid to two different Solids at a specific temperature and composition.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 66, originalRef: "L1:Q66",
            question: "What is a eutectoid reaction?",
            answer: "On cooling, one Solid phase transforms into two different Solid phases (S1 → S2 + S3).",
            hint: "Solid to two different Solids at a specific temperature and composition.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 67, originalRef: "L1:Q67",
            question: "What is a peritectic reaction?",
            answer: "On cooling, a Liquid and one Solid phase react to form a different Solid phase (L + S1 → S2).",
            hint: "Liquid plus Solid combine to form a new Solid.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 68, originalRef: "L1:Q68",
            question: "What is a metallic alloy?",
            answer: "A mixture containing at least one metal element, exhibiting metallic properties.",
            hint: "A metal combined with other elements.",
            isHard: false, isOpenQuestion: false
        },
         {
            id: 69, originalRef: "L1:Q69",
            question: "How many components do alloys contain?",
            answer: "At least two.",
            hint: "An alloy is a mixture, so needs more than one element.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 70, originalRef: "L1:Q70",
            question: "How many phases occur if two components have unlimited solubility (in the solid state)?",
            answer: "One (single solid solution phase).",
            hint: "If they dissolve completely into each other, they form a single uniform phase.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 71, originalRef: "L1:Q71",
            question: "How many phases occur if two components have no solubility (in the solid state, below transformations)?",
            answer: "Two (a mixture of the two pure component phases).",
            hint: "If they don't dissolve in each other, they remain as separate phases.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 72, originalRef: "L1:Q72",
            question: "When two metals are close together on the periodic table, they generally have...",
            answer: "Similar properties (atomic size, electronegativity, structure); high mutual solubility; tendency to form solid solutions.",
            hint: "Proximity on the periodic table often implies similar atomic characteristics.",
            isHard: false, isOpenQuestion: false
        },

        // --- List 2 Questions (Original Q1-84) ---
        {
            id: 73, originalRef: "L2:Q1",
            question: "How is the constitution of an alloy described?",
            answer: "By its elemental composition (types and percentages/concentrations of elements), and sometimes by the phases present and their proportions.",
            hint: "Think about what defines the 'makeup' of the mixture.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 74, originalRef: "L2:Q2",
            question: "A periodic structure of layers of two or more materials is called",
            answer: "Laminate, Multilayer composite, Superlattice (for very thin layers).",
            hint: "Think 'layers'.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 75, originalRef: "L2:Q3",
            question: "What is a classification of alloys?",
            answer: "Based on the primary metal (e.g., Ferrous, Non-ferrous), number of components (e.g., Binary, Ternary), structure (e.g., Substitutional, Interstitial), application (e.g., Structural, Tool, Stainless).",
            hint: "How can alloys be grouped?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 76, originalRef: "L2:Q4",
            question: "What is a substitutional alloy?",
            answer: "An alloy where solute atoms replace solvent atoms on the crystal lattice sites.",
            hint: "Think 'substitute'. Where do the added atoms go?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 77, originalRef: "L2:Q5",
            question: "What is an interstitial alloy?",
            answer: "An alloy where small solute atoms occupy the interstitial spaces between larger solvent atoms in the lattice.",
            hint: "Think 'interstice' = space between. Where do the added atoms go?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 78, originalRef: "L2:Q6",
            question: "The process where a molten metal is poured into a mould with a desired geometrical shape and then cooled down to form a solidified part is called",
            answer: "Casting.",
            hint: "The name of the process itself.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 79, originalRef: "L2:Q7",
            question: "Why are cooling curves used?",
            answer: "To determine phase transformation temperatures (like melting/solidification points, eutectic temperatures), analyze solidification behavior/range, infer phase information.",
            hint: "What information does tracking temperature vs. time during cooling give?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 80, originalRef: "L2:Q8",
            question: "What do the Hume-Rothery rules describe?",
            answer: "Conditions favouring high solid solubility in substitutional alloys (based on atomic size, crystal structure, electronegativity, valency).",
            hint: "Rules about mixing elements to form solid solutions.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 81, originalRef: "L2:Q9",
            question: "What information can you get by reading a phase diagram?",
            answer: "Stable phases at different temperatures and compositions, phase compositions, relative amounts of phases (using the lever rule), solidification paths, transformation temperatures.",
            hint: "What does the 'map' of phases tell you?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 82, originalRef: "L2:Q10",
            question: "Which processes are related to casting?",
            answer: "Melting, Pouring, Solidification, Mold making/design, Fettling (removing excess material), Heat treatment.",
            hint: "Think about the steps involved from liquid metal to finished part.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 83, originalRef: "L2:Q11",
            question: "What is a dendrite?",
            answer: "A tree-like or branched crystal structure formed during solidification, especially in metals and alloys.",
            hint: "Think 'tree-like' growth during freezing.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 84, originalRef: "L2:Q12",
            question: "The heat treatment process with the aim to reduce a metal's hardness and improve plasticity and facilitate machining is called ...",
            answer: "Annealing.",
            hint: "A heat treatment for softening.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 85, originalRef: "L2:Q13",
            question: "What are the allotropes of iron at atmospheric pressure?",
            answer: "Alpha (α) Ferrite (BCC), Gamma (γ) Austenite (FCC), Delta (δ) Ferrite (BCC).",
            hint: "Different crystal structures of iron at different temperatures.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 86, originalRef: "L2:Q14",
            question: "Which iron modification is stable at room temperature?",
            answer: "Alpha (α) Ferrite.",
            hint: "The structure of iron under normal conditions.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 87, originalRef: "L2:Q15", // Duplicate L2:Q13
            question: "What are the allotropes of iron at atmospheric pressure?",
            answer: "Alpha (α) Ferrite (BCC), Gamma (γ) Austenite (FCC), Delta (δ) Ferrite (BCC).",
            hint: "Different crystal structures of iron at different temperatures.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 88, originalRef: "L2:Q16",
            question: "What is the product of the Electric arc furnace?",
            answer: "Molten steel (crude steel), often alloy or specialty steels (primarily from scrap recycling or DRI).",
            hint: "What comes out of this type of furnace?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 89, originalRef: "L2:Q17",
            question: "What are the routes by which steel is made today?",
            answer: "Basic Oxygen Steelmaking (BOS/BOF) and Electric Arc Furnace (EAF).",
            hint: "The two main modern steel production methods.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 90, originalRef: "L2:Q18",
            question: "What is the product of the Basic oxygen furnace?",
            answer: "Molten steel (crude steel), primarily carbon and low-alloy steels (primarily from pig iron).",
            hint: "What comes out of this other type of steelmaking furnace?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 91, originalRef: "L2:Q19",
            question: "What is basic oxygen steelmaking?",
            answer: "A primary steelmaking process refining molten pig iron and scrap using injected oxygen.",
            hint: "Describe the process involving oxygen injection.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 92, originalRef: "L2:Q20",
            question: "Cast iron is also termed as ...",
            answer: "High-carbon iron alloy, Fe-C alloy with > 2.14% C.",
            hint: "How is cast iron defined based on composition?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 93, originalRef: "L2:Q21",
            question: "What is cast iron?",
            answer: "An iron alloy with high carbon (>2.14 wt%, typically 2.5-4%) and often silicon (1-3%), known for good castability.",
            hint: "Describe its composition and key property.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 94, originalRef: "L2:Q22",
            question: "What is an austenite stabilizer?",
            answer: "An alloying element (e.g., Ni, Mn, C, N) that widens the temperature range for stable austenite (FCC phase) in iron/steel.",
            hint: "An element that helps the FCC phase exist.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 95, originalRef: "L2:Q23",
            question: "What is a ferrit stabilizer?",
            answer: "An alloying element (e.g., Cr, Si, Mo, V) that widens the temperature range for stable ferrite (BCC phase) in iron/steel.",
            hint: "An element that helps the BCC phase exist.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 96, originalRef: "L2:Q24",
            question: "What is a common non-metallic alloying element used for steels?",
            answer: "Carbon (C). (Also N, Si, P, S are relevant non-metals/metalloids).",
            hint: "The defining non-metal in steel.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 97, originalRef: "L2:Q25",
            question: "What is the main alloying element for stainless steels?",
            answer: "Chromium (Cr) (>10.5%).",
            hint: "The key element giving stainless steel its property.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 98, originalRef: "L2:Q26",
            question: "What is a steel parasite?",
            answer: "Undesirable impurity elements in steel (e.g., S, P) that harm properties.",
            hint: "Unwanted elements in steel.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 99, originalRef: "L2:Q27",
            question: "What is a ferrite?",
            answer: "The BCC crystal structure phase of iron (α-Fe or δ-Fe), or the solid solution based on it (very low carbon solubility).",
            hint: "The BCC form of iron/steel.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 100, originalRef: "L2:Q28",
            question: "What is an austenite?",
            answer: "The FCC crystal structure phase of iron (γ-Fe), or the solid solution based on it (higher carbon solubility).",
            hint: "The FCC form of iron/steel.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 101, originalRef: "L2:Q29",
            question: "What is a hypoeutectoid alloy?",
            answer: "In Fe-C system, an alloy with carbon content less than the eutectoid composition (0.76 wt% C).",
            hint: "Composition relative to the eutectoid point ('hypo' means less).",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 102, originalRef: "L2:Q30",
            question: "What is a hypereutectoid alloy?",
            answer: "In Fe-C system, an alloy with carbon content greater than the eutectoid (0.76 wt% C) and less than the maximum solubility in austenite (~2.14 wt% C).",
            hint: "Composition relative to the eutectoid point ('hyper' means more).",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 103, originalRef: "L2:Q31",
            question: "Steels are also termed as",
            answer: "Iron-carbon alloys (with C < 2.14 wt%).",
            hint: "The basic definition of steel.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 104, originalRef: "L2:Q32",
            question: "What is mild steel?",
            answer: "Low-carbon steel (typically 0.05-0.25% C).",
            hint: "A common type of steel defined by its carbon content.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 105, originalRef: "L2:Q33",
            question: "What is a HSLA steel?",
            answer: "High-Strength Low-Alloy steel.",
            hint: "Expand the acronym.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 106, originalRef: "L2:Q34",
            question: "What are tool steels?",
            answer: "High-carbon or alloy steels designed for hardness, wear resistance, and toughness for making tools.",
            hint: "Steels used for making tools - what properties do they need?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 107, originalRef: "L2:Q35",
            question: "What are stainless steels most notable for?",
            answer: "Corrosion resistance.",
            hint: "Their defining characteristic.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 108, originalRef: "L2:Q36",
            question: "Cast iron solidifies as crystal mixtures and are suitable for casting processes. True/False?",
            answer: "True.",
            hint: "Consider cast iron's structure and main application.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 109, originalRef: "L2:Q37",
            question: "Cast iron crystallize as solid solutions and are suitable for various forming processes. True/False?",
            answer: "False. (They form mixtures, and are generally brittle/not easily formed).",
            hint: "Consider cast iron's typical microstructure and brittleness.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 110, originalRef: "L2:Q38",
            question: "What types of heat treatments are used for steels?",
            answer: "Annealing, Normalizing, Hardening (Quenching), Tempering, Surface Hardening (Carburizing, Nitriding, etc.), Stress Relieving.",
            hint: "Name common ways heat is used to alter steel properties.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 111, originalRef: "L2:Q39",
            question: "What is slag?",
            answer: "A non-metallic byproduct formed during smelting or refining to remove impurities from molten metal.",
            hint: "The glassy waste product from metal refining.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 112, originalRef: "L2:Q40",
            question: "What are the blast furnace products?",
            answer: "Molten pig iron (main product), Slag, Flue gases.",
            hint: "What comes out of the big furnace used for iron ore?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 113, originalRef: "L2:Q41",
            question: "What are the blast furnace ingredients?",
            answer: "Iron ore, Coke, Limestone (flux), Hot air blast.",
            hint: "What goes into the big furnace used for iron ore?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 114, originalRef: "L2:Q42",
            question: "[Image shows a tilting converter vessel typical of BOS/BOF]. Which process is shown here?",
            answer: "Basic Oxygen Furnace (BOF) or Basic Oxygen Steelmaking (BOS).",
            hint: "Tilting vessel, oxygen lance - primary steelmaking.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 115, originalRef: "L2:Q43",
            question: "[Image shows a tall furnace with top charging and bottom tapping]. Which process is shown here?",
            answer: "Blast Furnace.",
            hint: "Tall furnace for smelting iron ore.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 116, originalRef: "L2:Q44",
            question: "Which one is an iron ore?",
            answer: "Hematite (Fe₂O₃), Magnetite (Fe₃O₄), Goethite (FeO(OH)), Limonite, Siderite (FeCO₃). (Depends on options).",
            hint: "Natural source of iron.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 117, originalRef: "L2:Q45",
            question: "[Image shows a furnace with electrodes]. Which process is shown here?",
            answer: "Electric Arc Furnace (EAF).",
            hint: "Uses electrodes/arc for melting scrap.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 118, originalRef: "L2:Q46",
            question: "Steels with an alloy content of > 5% are termed as ...",
            answer: "High-alloy steels.",
            hint: "Classification based on total alloy content.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 119, originalRef: "L2:Q47",
            question: "Steels with an alloy content of < 5% are termed as ...",
            answer: "Low-alloy steels.",
            hint: "Classification based on total alloy content.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 120, originalRef: "L2:Q48",
            question: "Which Fe allotrope has a bcc structure?",
            answer: "Alpha (α) Ferrite, Delta (δ) Ferrite.",
            hint: "Body-Centered Cubic iron.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 121, originalRef: "L2:Q49",
            question: "Which Fe allotrope has a fcc structure?",
            answer: "Gamma (γ) Austenite.",
            hint: "Face-Centered Cubic iron.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 122, originalRef: "L2:Q50",
            question: "Patina is a layer of corrosion that forms on the surface of ...",
            answer: "Copper (Cu), Bronze, Brass.",
            hint: "Greenish layer on some metals.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 123, originalRef: "L2:Q51",
            question: "What makes the roof look greenish?",
            answer: "Green patina formed on copper or bronze roofing.",
            hint: "Relates to the previous question.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 124, originalRef: "L2:Q52",
            question: "What is a nonferrous metal?",
            answer: "A metal or alloy not based on iron (Fe).",
            hint: "'Non-ferrous' means 'not iron'.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 125, originalRef: "L2:Q53",
            question: "A cathode gives up electrones to the circuit and corrodes.",
            answer: "False. (Cathodes receive electrons; anodes give up electrons and corrode).",
            hint: "Role of cathode in electrochemistry.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 126, originalRef: "L2:Q54",
            question: "A cathode receives electrons from the circuit and produces a byproduct.",
            answer: "True. (Reduction occurs at the cathode).",
            hint: "Role of cathode in electrochemistry.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 127, originalRef: "L2:Q55",
            question: "An anode gives up electrones to the circuit and corrodes.",
            answer: "True. (Oxidation/corrosion occurs at the anode).",
            hint: "Role of anode in electrochemistry.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 128, originalRef: "L2:Q56",
            question: "An anode receives electrons from the circuit and produces a byproduct.",
            answer: "False. (Anodes give up electrons).",
            hint: "Role of anode in electrochemistry.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 129, originalRef: "L2:Q57",
            question: "What are properties of Ti?",
            answer: "High strength-to-weight ratio, Excellent corrosion resistance, Biocompatible, High melting point.",
            hint: "Key features of Titanium.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 130, originalRef: "L2:Q58",
            question: "What are properties of Mg?",
            answer: "Very low density (lightweight), Good machinability, Flammable (in fine form), Relatively low strength/stiffness (unless alloyed).",
            hint: "Key features of Magnesium.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 131, originalRef: "L2:Q59",
            question: "What are properties of Cu?",
            answer: "Excellent electrical/thermal conductivity, Good corrosion resistance, Ductile, Malleable, Reddish color.",
            hint: "Key features of Copper.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 132, originalRef: "L2:Q60",
            question: "What are properties of Al?",
            answer: "Low density, Good strength-to-weight ratio, Good corrosion resistance (passive layer), Good conductivity, Recyclable.",
            hint: "Key features of Aluminum.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 133, originalRef: "L2:Q61",
            question: "AZ91 is a ...",
            answer: "Magnesium alloy (specifically Mg-Al-Zn casting alloy).",
            hint: "A common light metal alloy designation.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 134, originalRef: "L2:Q62",
            question: "What is brass?",
            answer: "Alloy of Copper (Cu) and Zinc (Zn).",
            hint: "Common copper alloy, often yellowish.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 135, originalRef: "L2:Q63",
            question: "What is bronze?",
            answer: "Alloy primarily of Copper (Cu) and Tin (Sn) (traditionally).",
            hint: "Common copper alloy, historically important.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 136, originalRef: "L2:Q64",
            question: "What is a Cu alloy?",
            answer: "An alloy where Copper (Cu) is the main component.",
            hint: "General term for copper-based alloys.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 137, originalRef: "L2:Q65",
            question: "Which alloy is also called marine alloy?",
            answer: "Often refers to alloys with excellent seawater corrosion resistance like Cupronickel (Cu-Ni), some Aluminum alloys (5xxx series), some stainless steels.",
            hint: "Alloys used in seawater applications.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 138, originalRef: "L2:Q66",
            question: "What is new silver?",
            answer: "Nickel silver or German silver (Copper-Nickel-Zinc alloy, Cu-Ni-Zn).",
            hint: "A silvery-looking copper alloy without actual silver.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 139, originalRef: "L2:Q67",
            question: "What are Ti alloys?",
            answer: "Alloys where Titanium (Ti) is the main component.",
            hint: "Alloys based on titanium.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 140, originalRef: "L2:Q68",
            question: "Which one is a mechanical testing method?",
            answer: "Tensile test, Hardness test, Impact test, Fatigue test, Creep test, Flexural test, Compression test.",
            hint: "Ways to measure response to force.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 141, originalRef: "L2:Q69",
            question: "Which one is a destructive test process?",
            answer: "Tensile test, Impact test, Bend test (to failure), Hardness test (leaves indent).",
            hint: "Testing that damages the sample.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 142, originalRef: "L2:Q70",
            question: "Which one is a non-destructive test process?",
            answer: "Ultrasonic Testing (UT), Radiography (RT), Magnetic Particle Testing (MT), Liquid Penetrant Testing (PT), Eddy Current Testing (ET), Visual Testing (VT).",
            hint: "Testing that does not damage the sample.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 143, originalRef: "L2:Q71",
            question: "Which material has the highest density? (Among common engineering materials/elements)",
            answer: "Osmium (Os), Iridium (Ir), Platinum (Pt), Tungsten (W), Gold (Au). (Depends on options given).",
            hint: "Heaviest materials.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 144, originalRef: "L2:Q72",
            question: "Which materials have the lowest density?",
            answer: "Magnesium (Mg) alloys, Polymers, Wood, Foams, Beryllium (Be).",
            hint: "Lightest materials.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 145, originalRef: "L2:Q73",
            question: "Which materials have the best electrical conductivity?",
            answer: "Silver (Ag), Copper (Cu). (Also Au, Al).",
            hint: "Materials that conduct electricity well.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 146, originalRef: "L2:Q74",
            question: "Which material has the highest stiffness? (Stiffness = Young's Modulus)",
            answer: "Diamond, Tungsten (W), some Ceramics (Alumina, SiC).",
            hint: "Materials most resistant to elastic stretching.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 147, originalRef: "L2:Q75",
            question: "Which materials have the lowest stiffness?",
            answer: "Rubbers (Elastomers), Foams, many Polymers.",
            hint: "Materials easiest to stretch elastically (most flexible).",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 148, originalRef: "L2:Q76",
            question: "What does the galvanic series represent?",
            answer: "A ranking of metals/alloys by their relative electrochemical potential/nobility in a specific environment (like seawater), predicting corrosion behavior when coupled.",
            hint: "Ranking for corrosion tendency.",
            isHard: false, isOpenQuestion: false
        },
	    {
            id: 149, originalRef: "L2:Q77",
            question: "How is a material fatigue performance characterized?",
            answer: "By an S-N curve (Stress vs. Cycles to failure), Fatigue limit (Endurance limit), Fatigue strength.",
            hint: "How is resistance to failure under cyclic loading measured/represented?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 150, originalRef: "L2:Q78",
            question: "What is flexural testing used for?",
            answer: "To measure properties under bending load (flexural strength, flexural modulus), often used for brittle materials (ceramics, some polymers).",
            hint: "Testing under bending loads.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 151, originalRef: "L2:Q79",
            question: "What are common hardness testing methods?",
            answer: "Brinell, Vickers, Rockwell, Knoop, Shore (for polymers/rubbers).",
            hint: "Names of tests involving indentation.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 152, originalRef: "L2:Q80",
            question: "How is the hardness of a material measured when using an indenter?",
            answer: "By measuring the size (depth, area, or diameter) of the permanent indentation made by a specific indenter under a controlled load.",
            hint: "What is measured after pressing the indenter in?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 153, originalRef: "L2:Q81",
            question: "What are common impact test procedures?",
            answer: "Charpy test, Izod test. (Measure impact toughness/energy absorption).",
            hint: "Tests involving breaking a notched bar with a pendulum.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 154, originalRef: "L2:Q82",
            question: "The modulus of elasticity is a measure of a material's",
            answer: "Stiffness, resistance to elastic deformation.",
            hint: "What property does Young's Modulus represent?",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 155, originalRef: "L2:Q83",
            question: "What causes the difference of properties between materials?",
            answer: "Differences in atomic composition, interatomic bonding, crystal structure/atomic arrangement, microstructure (phases, grains, defects), processing history.",
            hint: "Think from atomic level up to processing.",
            isHard: false, isOpenQuestion: false
        },
        {
            id: 156, originalRef: "L2:Q84",
            question: "[Image shows stress-strain curves A, B, C]. Use the stress-strain diagram. Which curve describes the behaviour of a ceramic?",
            answer: "Curve A (High stiffness, low strain to fracture, brittle).",
            hint: "How do brittle materials behave on a stress-strain curve?",
            isHard: false, isOpenQuestion: false
        },

         // --- List 3 Questions (Open Questions - L3:Q1 to L3:Q28) ---
         {
            id: 157, originalRef: "L3:Q1",
            question: "[Image shows stress-strain curve with points A, B, C and regions a, b, c]. A stress-strain curve of a material is plotted. How are the characteristic points (A, B, C) named? What happens in the metal at each point and in each area (a, b, c)?",
            answer: "Points: A=Yield Strength (σy), B=Ultimate Tensile Strength (UTS), C=Fracture Point.\nRegions: a=Elastic deformation (reversible bond stretching), b=Uniform plastic deformation (dislocation motion, strain hardening), c=Necking (localized deformation, void formation leading to fracture).\nAt A: Onset of significant plastic deformation.\nAt B: Max engineering stress, necking starts.\nAt C: Material ruptures.",
            hint: "Identify yield, peak stress, and break points. Describe elastic, uniform plastic, and localized plastic regions.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 158, originalRef: "L3:Q2",
            question: "[Image shows two cooling curves: one with plateau, one with range]. Describe the solidification process of a molten metal. What are the responsible mechanisms for a solidification of a metal? What type of metal is cooled according to the cooling curve?",
            answer: "Process: 1. Nucleation (formation of stable solid nuclei, usually heterogeneous). 2. Growth (atoms attach to nuclei, forming crystals like dendrites).\nMechanisms: Driven by heat extraction (undercooling) and atomic attachment kinetics.\nCurves: Left Curve (plateau) = Pure metal or Eutectic alloy. Right Curve (range) = Alloy (solid solution).",
            hint: "Think nucleation and growth. Consider heat removal. How does cooling differ for pure metals vs alloys?",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 159, originalRef: "L3:Q3",
            question: "What is an Ashby plot? Describe Ashby plot. What is it used for?",
            answer: "An Ashby plot is a log-log scatter plot of two material properties (e.g., Strength vs Density). Material classes (metals, polymers, etc.) occupy distinct regions.\nUsed for: Material selection, visualizing property relationships, comparing materials, identifying trade-offs using performance indices.",
            hint: "What properties are plotted? What's the main purpose related to material choice?",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 160, originalRef: "L3:Q4",
            question: "What is the strategy for selecting a material for a special design? What is the main goal of material selection?",
            answer: "Strategy: 1. Translate design needs into material constraints/objectives. 2. Screen materials against constraints. 3. Rank candidates based on objectives. 4. Investigate leading candidates.\nGoal: Choose the material that best satisfies the design's performance, reliability, safety, and cost needs.",
            hint: "Think steps: requirements -> screen -> rank -> investigate. What's the ultimate aim?",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
         {
            id: 161, originalRef: "L3:Q5",
            question: "[Refers to Ashby plot: Strength vs. Relative Cost]\na. Which class of metallic alloys is the cheapest?\nb. Which polymer is the most expensive one?\nc. Which is the strongest metal?\nd. Which the least strong non-technical ceramic?\ne. Determine whether Mg alloys are more or less expensive than stainless steel?",
            answer: "a. Cheapest Metals: Lead alloys, Zinc alloys, Cast irons, Low-carbon steels.\nb. Most Expensive Polymer: High-performance polymers (e.g., PEEK, PI).\nc. Strongest Metal: Tungsten alloys, high-strength steels, Ni alloys, Ti alloys.\nd. Least Strong Non-Tech Ceramic: Cement, Concrete, Brick.\ne. Mg vs Stainless Cost: Overlapping ranges, but Mg alloys appear slightly more expensive per volume on average on this plot.",
            hint: "Read positions on Strength (Y) and Cost (X) axes for different material classes.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 162, originalRef: "L3:Q6",
            question: "[Refers to Ashby plot: Young's Modulus vs. Density]\na. Which class of metallic alloy is the lightest?\nb. Which polymer is the heaviest?\nc. Which the stiffest metal?\nd. Which the least stiff elastomer?\ne. Determine whether Zinc alloys are more or less stiff than stainless steel?",
            answer: "a. Lightest Metal: Magnesium (Mg) alloys.\nb. Heaviest Polymer: Filled polymers or dense polymers like PTFE.\nc. Stiffest Metal: Tungsten (W) alloys.\nd. Least Stiff Elastomer: Soft rubbers (e.g., Silicone, PU).\ne. Zn vs Stainless Stiffness: Zinc alloys are significantly less stiff (lower Young's Modulus) than stainless steels.",
            hint: "Read positions on Modulus (Y) and Density (X) axes for different material classes.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 163, originalRef: "L3:Q7",
            question: "What is a combined interstitial and substitutional alloy? Give an example.",
            answer: "An alloy where some solute atoms substitute for solvent atoms, while others occupy interstitial sites.\nExample: Austenitic Stainless Steel (Fe base; Cr/Ni substitute; C is interstitial).",
            hint: "Both types of atom placement occur. Stainless steel is a key example.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 164, originalRef: "L3:Q8",
            question: "What is an interstitial solid solution alloy? Give an example.",
            answer: "An alloy where small solute atoms fit into the interstitial spaces between larger solvent atoms.\nExample: Carbon in Iron (Steel - Ferrite/Austenite phases).",
            hint: "Small atoms in gaps. Think C in Fe.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 165, originalRef: "L3:Q9",
            question: "What is a substitutional alloy? Give an example.",
            answer: "An alloy where solute atoms replace solvent atoms on the regular lattice sites.\nExample: Brass (Zn substituting for Cu), Cupronickel (Ni substituting for Cu).",
            hint: "Atoms replace each other. Think Cu/Zn (Brass).",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 166, originalRef: "L3:Q10",
            question: "What is 'plastic deformation'? Which mechanism explains the plastic deformation of metals?",
            answer: "Plastic deformation: Permanent, non-recoverable change in shape under stress beyond yield strength.\nMechanism in Metals: Movement of dislocations (line defects).",
            hint: "Permanent shape change. What defect moves in metals?",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 167, originalRef: "L3:Q11",
            question: "What is precipitation hardening? Describe the main types of mechanisms.",
            answer: "A heat treatment creating fine precipitates of a second phase to strengthen an alloy.\nMechanism: Precipitates impede dislocation motion. Dislocations must either cut through small/coherent precipitates or loop around larger/incoherent ones.",
            hint: "Fine particles blocking defects. Heat treatment steps? How do dislocations interact?",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 168, originalRef: "L3:Q12",
            question: "Describe the mechanism for strengthening a metal. Name 3 strengthening mechanisms in metals.",
            answer: "Mechanism: Impeding dislocation movement makes plastic deformation harder, increasing yield strength.\nThree Mechanisms: 1. Grain Size Reduction (more boundaries), 2. Solid Solution Strengthening (lattice distortion by solutes), 3. Strain Hardening (dislocation entanglement).",
            hint: "How to make dislocation movement harder? List methods.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 169, originalRef: "L3:Q13",
            question: "What is a blast furnace? What is it used for?",
            answer: "A large vertical shaft furnace used for smelting.\nUsed for: Chemically reducing iron ore into molten pig iron using coke and limestone.",
            hint: "Big furnace for iron ore. What does it make?",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 170, originalRef: "L3:Q14",
            question: "What is the difference between steel and cast iron in terms of microstructure and chemical composition?",
            answer: "Composition: Steel < 2.14% C; Cast Iron > 2.14% C (often + high Si).\nMicrostructure: Steel = ferrite, pearlite, bainite, martensite; Cast Iron = typically eutectic structure with graphite (flakes/nodules) or cementite in a steel-like matrix.",
            hint: "Key differences in C% and resulting structures (graphite?).",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 171, originalRef: "L3:Q15",
            question: "What types of microstructures can be produced when cooling austenite to room temperature? When do these microstructures occur?",
            answer: "Microstructures: Pearlite (+ ferrite/cementite), Bainite, Martensite, Tempered Martensite.\nOccurrence: Depends on cooling rate: Slow -> Pearlite; Moderate -> Bainite; Fast (Quench) -> Martensite; Quench + Reheat -> Tempered Martensite.",
            hint: "Different structures depending on how fast you cool steel.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 172, originalRef: "L3:Q16",
            question: "What is an 'allotropic metal'? Give an example.",
            answer: "A metal existing in more than one crystal structure depending on temperature/pressure.\nExample: Iron (Fe), Titanium (Ti), Tin (Sn).",
            hint: "Multiple crystal structures. Fe is the classic example.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 173, originalRef: "L3:Q17",
            question: "What is an alloy? Why are alloys used? Give an example of an alloy.",
            answer: "Alloy: A metallic mixture of a base metal and other element(s).\nWhy: To improve properties (strength, corrosion resistance, etc.) vs pure metal.\nExample: Steel (Fe+C), Brass (Cu+Zn).",
            hint: "Metal mixture. Why mix them? Give an example.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 174, originalRef: "L3:Q18",
            question: "How are materials classified? Give an example",
            answer: "Classification: Metals, Ceramics, Polymers, Composites.\nExample: Steel (Metal), Alumina (Ceramic), PVC (Polymer), Fiberglass (Composite).",
            hint: "Main groups: M, C, P, C. Give one example.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 175, originalRef: "L3:Q19",
            question: "What is a composite? What materials can be combined to a composite?",
            answer: "Composite: Material made of two+ distinct constituent materials (reinforcement + matrix).\nCombinations: Materials from different classes (Polymer Matrix-PMC, Metal Matrix-MMC, Ceramic Matrix-CMC). E.g., Carbon fibers in Epoxy resin (PMC).",
            hint: "Mix of materials. Reinforcement + Matrix. Give example combination.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 176, originalRef: "L3:Q20",
            question: "What is a heat treatment? Why are metals heat treated?",
            answer: "Heat Treatment: Controlled heating/cooling to alter microstructure.\nWhy: To modify mechanical properties (hardness, strength, ductility, toughness) or relieve stresses.",
            hint: "Heating/cooling. Why do it to metals?",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 177, originalRef: "L3:Q21",
            question: "What is materials science and materials engineering?",
            answer: "Materials Science: Investigates structure-processing-property relationships in materials.\nMaterials Engineering: Uses materials science knowledge to design, select, and apply materials for engineering needs.",
            hint: "Science = structure/property relation; Engineering = application/design.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 178, originalRef: "L3:Q22",
            question: "What is casting? What is it used for?",
            answer: "Casting: Pouring liquid material (e.g., molten metal) into a mold and allowing it to solidify.\nUsed for: Creating parts with specific, often complex shapes.",
            hint: "Pouring liquid metal. What's it used for?",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 179, originalRef: "L3:Q23",
            question: "What is the difference between cast alloys and wrought alloys? Give an example for each one.",
            answer: "Difference: Cast alloys are designed for casting properties (fluidity); Wrought alloys are designed for mechanical working (rolling, forging).\nExample Cast: Grey Cast Iron, A356 Al.\nExample Wrought: AISI 1045 Steel, 6061 Al.",
            hint: "Designed for casting vs. designed for mechanical working. Give examples.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 180, originalRef: "L3:Q24",
            question: "What is the 'lever rule'? What is it used for?",
            answer: "A mathematical rule used with binary phase diagrams.\nUsed for: Calculating the relative weight fractions of the two phases in equilibrium within a two-phase region.",
            hint: "Used with phase diagrams. What does it calculate in 2-phase regions?",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 181, originalRef: "L3:Q25",
            question: "What is martensite and tempered martensite?",
            answer: "Martensite (steel): Very hard, brittle, metastable BCT phase formed by quenching austenite.\nTempered Martensite: Microstructure of fine carbide precipitates in ferrite, formed by tempering martensite; tougher than untempered martensite.",
            hint: "Hard phase from quenching steel. What happens when you temper it?",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 182, originalRef: "L3:Q26",
            question: "What is the difference between primary and secondary metallurgy?",
            answer: "Primary Metallurgy: Extracts metal from ore (e.g., smelting).\nSecondary Metallurgy: Refines molten metal after primary extraction but before casting (e.g., ladle treatments).",
            hint: "Primary = extraction from ore; Secondary = refining molten metal.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 183, originalRef: "L3:Q27",
            question: "What is a phase transformation? When do they occur?",
            answer: "Phase Transformation: A change from one phase (state/structure) to another.\nOccurrence: When changes in Temperature, Pressure, or Composition make a different phase more thermodynamically stable.",
            hint: "Change in state/structure. Driven by stability (T, P, Comp).",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        },
        {
            id: 184, originalRef: "L3:Q28",
            question: "What is a phase diagram? What is it used for?",
            answer: "Phase Diagram: A map showing stable phases under equilibrium conditions vs T, P, Composition.\nUsed for: Predicting phase stability, compositions, amounts; understanding solidification; guiding heat treatment.",
            hint: "Map of phases. Used to predict structure/guide treatment.",
            isHard: false, isOpenQuestion: true // Marked as Open Question
        }

    ]; // END of allQuestions array


    // --- Essential JavaScript Variables ---
    let currentQuestionIndex = 0; // Index for the 'allQuestions' array
    let currentHardIndex = 0;     // Index for the 'hardQuestions' array
    let isHardModeActive = false;
    let hardQuestions = []; // Array to hold questions marked as hard

    const questionEl = document.getElementById('question');
    const answerEl = document.getElementById('answer');
    const hintEl = document.getElementById('hint');
    const noHardMessageEl = document.getElementById('no-hard-message');
    const questionNumberEl = document.getElementById('question-number');
    const hardStatusEl = document.getElementById('hard-status');

    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const revealBtn = document.getElementById('revealBtn');
    const hintBtn = document.getElementById('hintBtn');
    const markHardBtn = document.getElementById('markHardBtn');
    const showHardOnlyCheckbox = document.getElementById('showHardOnlyCheckbox');
    const controls = document.getElementById('controls'); // Get controls div


    // --- Helper Functions ---

    // Fisher-Yates (Knuth) Shuffle function
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]]; // ES6 swap
        }
    }

    // Update the list of hard questions
    function updateHardQuestionsList() {
         hardQuestions = allQuestions.filter(q => q.isHard);
    }


    // --- Main Display Function ---
    function displayQuestion() {
        // Hide messages/content initially
        answerEl.classList.add('hidden');
        hintEl.classList.add('hidden');
        noHardMessageEl.classList.add('hidden');
        questionEl.classList.remove('hidden');
        controls.style.display = 'flex'; // Show controls by default

        let currentQ = null;
        let totalInView = 0;
        let currentIndexInView = 0;

        if (isHardModeActive) {
             if (hardQuestions.length > 0) {
                // Clamp currentHardIndex if it's out of bounds (e.g., after unmarking)
                currentHardIndex = Math.max(0, Math.min(currentHardIndex, hardQuestions.length - 1));

                currentIndexInView = currentHardIndex;
                totalInView = hardQuestions.length;
                currentQ = hardQuestions[currentIndexInView];
                questionNumberEl.innerContent = `Card <span class="math-inline">\{currentIndexInView \+ 1\}/</span>{totalInView} (Hard Only)`;
            } else {
                // No hard questions to show
                questionEl.classList.add('hidden');
                noHardMessageEl.classList.remove('hidden');
                questionNumberEl.textContent = `Card 0/0 (Hard Only)`;
                 // Hide controls except filter checkbox when no hard questions
                 controls.style.display = 'none';
                 markHardBtn.style.display = 'none'; // Specifically hide mark hard too
                 questionEl.classList.remove('open-question-text'); // Ensure class is removed
                 return; // Stop further processing for this case
            }
        } else {
            currentIndexInView = currentQuestionIndex;
            totalInView = allQuestions.length;
            currentQ = allQuestions[currentIndexInView];
            questionNumberEl.innerContent = `Card <span class="math-inline">\{currentIndexInView \+ 1\}/</span>{totalInView}`;
        }

         // Ensure mark hard button is visible if controls are generally visible
         markHardBtn.style.display = 'inline-block';

        // --- Display content for the selected question ---
        // Escape HTML characters in question/answer/hint strings before setting innerHTML
        // to prevent potential XSS if the source text contained HTML/script tags.
        // Basic escaping for < and >
        const escapeHtml = (unsafe) => {
            if (typeof unsafe !== 'string') return unsafe;
            return unsafe
                 .replace(/</g, "&lt;")
                 .replace(/>/g, "&gt;");
        };

        questionEl.innerHTML = escapeHtml(currentQ.question); // Use escaped HTML
        answerEl.innerHTML = escapeHtml(currentQ.answer); // Use escaped HTML
        hintEl.innerHTML = escapeHtml(currentQ.hint);

        // Apply styling for open questions
        if (currentQ.isOpenQuestion) {
             questionEl.classList.add('open-question-text');
             // Optionally add a star or prefix
             // questionEl.innerHTML = `⭐ ${escapeHtml(currentQ.question)}`; // Add star if desired
        } else {
            questionEl.classList.remove('open-question-text');
        }


        revealBtn.disabled = false;
        hintBtn.disabled = false;

        // Update Hard status display
        if (currentQ.isHard) {
            hardStatusEl.classList.remove('hidden');
            markHardBtn.classList.add('marked');
            markHardBtn.textContent = "Unmark Hard";
        } else {
            hardStatusEl.classList.add('hidden');
            markHardBtn.classList.remove('marked');
            markHardBtn.textContent = "Mark as Hard";
        }

        // Enable/disable nav buttons based on the active mode
        prevBtn.disabled = currentIndexInView === 0;
        nextBtn.disabled = currentIndexInView === totalInView - 1;
    }


    // --- Event Listeners ---

    prevBtn.addEventListener('click', () => {
        if (isHardModeActive) {
            if (currentHardIndex > 0) {
                currentHardIndex--;
                displayQuestion();
            }
        } else {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }
    });

    nextBtn.addEventListener('click', () => {
         if (isHardModeActive) {
             if (currentHardIndex < hardQuestions.length - 1) {
                currentHardIndex++;
                displayQuestion();
            }
         } else {
            if (currentQuestionIndex < allQuestions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            }
        }
    });

    revealBtn.addEventListener('click', () => {
        answerEl.classList.remove('hidden');
        revealBtn.disabled = true;
    });

    hintBtn.addEventListener('click', () => {
        hintEl.classList.remove('hidden');
        hintBtn.disabled = true;
    });

     markHardBtn.addEventListener('click', () => {
        let currentQObject = null;
        // Need to handle the case where hard mode is active but list is empty (shouldn't happen if displayQuestion logic is correct)
        if (isHardModeActive && hardQuestions.length > 0) {
             currentQObject = hardQuestions[currentHardIndex];
        } else if (!isHardModeActive) {
            currentQObject = allQuestions[currentQuestionIndex];
        } else {
            return; // Should not be able to click if no question displayed
        }


        // Find the question in the main list to toggle its status
        const questionInMainList = allQuestions.find(q => q.id === currentQObject.id);
        if (questionInMainList) {
             questionInMainList.isHard = !questionInMainList.isHard; // Toggle the flag
        }

        // If in hard mode, we need to update the filtered list and potentially the index
        if (isHardModeActive) {
            const currentlyDisplayedID = currentQObject.id;
            const wasHard = currentQObject.isHard; // Status *before* toggle if we found it in hardQuestions

            updateHardQuestionsList(); // Re-filter based on the change in allQuestions

            if (!wasHard) { // It means we just marked it as hard
                 // Try to find the new index of the item just marked as hard
                 let newIndex = hardQuestions.findIndex(q => q.id === currentlyDisplayedID);
                 if (newIndex !== -1) {
                     currentHardIndex = newIndex;
                 } // else: it somehow failed, maybe stay put? Defaulting to clamping below.
                 currentHardIndex = Math.max(0, Math.min(currentHardIndex, hardQuestions.length - 1));
            } else { // It means we just unmarked it
                 // Stay at current index if possible (if items before it weren't removed), otherwise clamp to end
                 currentHardIndex = Math.max(0, Math.min(currentHardIndex, hardQuestions.length - 1));
                 // If the list becomes empty, currentHardIndex will be -1 or 0, displayQuestion handles showing the message
            }
        }
         // Re-render the card
        displayQuestion();
    });

     showHardOnlyCheckbox.addEventListener('change', (event) => {
         if (event.target.checked) {
             // Activate Hard Mode
             updateHardQuestionsList();
             if (hardQuestions.length > 0) {
                 isHardModeActive = true;
                 // Try to find the current non-hard question in the hard list, or default to 0
                 const currentNonHardId = allQuestions[currentQuestionIndex].id;
                 const potentialHardIndex = hardQuestions.findIndex(q => q.id === currentNonHardId);
                 currentHardIndex = (potentialHardIndex !== -1) ? potentialHardIndex : 0;

                 displayQuestion();
             } else {
                  // No hard questions found, show message and uncheck
                  isHardModeActive = false; // Ensure mode is off
                  event.target.checked = false; // Uncheck the box
                  displayQuestion(); // Refresh display (will show standard mode)
                  // Show temporary message using the dedicated div
                  noHardMessageEl.textContent = "No questions marked as hard to show.";
                  noHardMessageEl.classList.remove('hidden');
                  // Hide question area when showing this message
                  questionEl.classList.add('hidden');
                  controls.style.display = 'none';
                  markHardBtn.style.display = 'none';

             }
         } else {
             // Deactivate Hard Mode
             isHardModeActive = false;
              // When switching back, try to find the index of the currently shown hard question in the full list
             if (hardQuestions.length > 0 && currentHardIndex < hardQuestions.length) {
                  const currentHardId = hardQuestions[currentHardIndex].id;
                  const indexInAll = allQuestions.findIndex(q => q.id === currentHardId);
                  if (indexInAll !== -1) {
                       currentQuestionIndex = indexInAll;
                  }
                  // If not found (shouldn't happen), it will just use the last value of currentQuestionIndex
             }
             displayQuestion();
         }
     });


    // --- Initial Load ---
    shuffleArray(allQuestions); // Shuffle the combined list once on load
    updateHardQuestionsList(); // Initial check for any pre-marked hard questions
    displayQuestion(); // Display the first card

</script>
</body>
</html>